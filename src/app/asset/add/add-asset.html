<div class="form-container">
  <form [formGroup]="assetForm" (ngSubmit)="onSubmit()" class="asset-form">
    <h2 class="form-title">Add New Asset</h2>

    <div *ngIf="errorMessage" class="error-banner">
      {{ errorMessage }}
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="assetName">Asset Name</label>
        <input id="assetName" type="text" formControlName="assetName" placeholder="e.g., MacBook Pro 16">
      </div>
      <div class="form-group">
        <label for="brand">Brand</label>
        <input id="brand" type="text" formControlName="brand" placeholder="e.g., Apple">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="categoryId">Category</label>
        <select id="categoryId" formControlName="categoryId">
          <option [ngValue]="null" disabled>Select a category</option>
          <option *ngFor="let category of categories" [value]="category.categoryId">{{ category.categoryName }}</option>
        </select>
      </div>
      <div class="form-group">
        <label for="typeId">Type</label>
        <select id="typeId" formControlName="typeId">
          <option [ngValue]="null" disabled>Select a type</option>
          <option *ngFor="let type of types" [value]="type.typeId">{{ type.typeName }}</option>
        </select>
      </div>
    </div>
    
    <div class="form-group">
      <label for="assetDescription">Description</label>
      <textarea id="assetDescription" formControlName="assetDescription" rows="3" placeholder="Enter a brief description"></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="allStock">Total Stock</label>
        <input id="allStock" type="number" formControlName="allStock" (input)="onStockChange()">
        <small class="help-text">Total number of assets</small>
      </div>
      <div class="form-group">
        <label for="numberOfAvailableToAssign">Available</label>
        <input id="numberOfAvailableToAssign" type="number" formControlName="numberOfAvailableToAssign" (input)="onStockChange()">
        <small class="help-text">Available for assignment</small>
      </div>
      <div class="form-group">
        <label for="numberOfMaintenance">Maintenance</label>
        <input id="numberOfMaintenance" type="number" formControlName="numberOfMaintenance" (input)="onStockChange()">
        <small class="help-text">Under maintenance</small>
      </div>
      <div class="form-group">
        <label for="numberOfRetired">Retired</label>
        <input id="numberOfRetired" type="number" formControlName="numberOfRetired" (input)="onStockChange()">
        <small class="help-text">Retired assets</small>
      </div>
    </div>

    <div class="stock-validation" *ngIf="showStockValidation">
      <div class="validation-info">
        <strong>Stock Validation:</strong>
        <span>Available ({{ formValue?.numberOfAvailableToAssign || 0 }}) + 
              Maintenance ({{ formValue?.numberOfMaintenance || 0 }}) + 
              Retired ({{ formValue?.numberOfRetired || 0 }}) = 
              {{ (formValue?.numberOfAvailableToAssign || 0) + (formValue?.numberOfMaintenance || 0) + (formValue?.numberOfRetired || 0) }}
        </span>
        <span class="total-stock">Total Stock: {{ formValue?.allStock || 0 }}</span>
        <span class="validation-status" [class.valid]="isStockValid()" [class.invalid]="!isStockValid()">
          {{ isStockValid() ? '✓ Valid' : '✗ Invalid' }}
        </span>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="cancel-btn" routerLink="/dashboard">Cancel</button>
      <button type="submit" class="submit-btn" [disabled]="assetForm.invalid">Add Asset</button>
    </div>
  </form>
</div>