<div class="users-container">
  <div class="table-nav">
    <h2 class="title">ğŸ‘¥ Users</h2>
    <div class="filters-div">
      <div class="filter-by-department" *ngIf="role=='Admin'">
        <select>
          <option value="">All Departments</option>
          <option *ngFor="let dept of departments" [value]="dept.departmentId">
            {{ dept.departmentName }}
          </option>
        </select>
      </div>
      <div  class="search-by-name-div">
        <input type="text" class="search-by-name" placeholder="Search by name" (input)="searchByName(searchInput.value)"
          #searchInput />
        <button (click)="searchByName(searchInput.value)">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </div>

    </div>

  </div>

  <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 users-table" *ngIf="dataSource.data.length > 0">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>ID</th>
      <td mat-cell *matCellDef="let user">{{ user.id }}</td>
    </ng-container>

    <ng-container matColumnDef="username">
      <th mat-header-cell *matHeaderCellDef>Username</th>
      <td mat-cell *matCellDef="let user">{{ user.username }}</td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>Email</th>
      <td mat-cell *matCellDef="let user">{{ user.email }}</td>
    </ng-container>

    <ng-container matColumnDef="role">
      <th mat-header-cell *matHeaderCellDef>Role</th>
      <td mat-cell *matCellDef="let user">
        <span class="badge role" [ngClass]="user.role.toLowerCase()">
          {{ user.role}}
        </span>
      </td>
    </ng-container>

    <ng-container matColumnDef="department">
      <th mat-header-cell *matHeaderCellDef>Department</th>
      <td mat-cell *matCellDef="let user">
        <span class="badge department">
          {{ user.departmentName }}
        </span>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <mat-paginator [length]="totalElements" [pageIndex]="pageIndex" [pageSize]="pageSize"
    [pageSizeOptions]="pageSizeOptions" (page)="handlePageEvent($event)" aria-label="Select page"
    class="pagniation-bannel">
  </mat-paginator>

</div>